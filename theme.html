<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ticket Page</title>
  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const navItems = ["뮤지컬/연극", "콘서트", "스포츠", "전시/행사", "레저", "테마/지역", "MD", "이벤트", "티켓오픈소식"];

    const Header = () => (
      <header className="bg-red-600 text-white p-2 flex items-center justify-between sticky top-0 z-50">
        <div className="flex items-center space-x-4">
          <img src="https://via.placeholder.com/40x40?text=Logo" alt="logo" className="w-10 h-10" />
          <h1 className="text-xl font-bold">ticketpage</h1>
        </div>
        <div className="flex items-center space-x-2">
          <input type="text" placeholder="검색어를 입력하세요" className="p-2 rounded w-96 text-black" />
          <button className="p-2 bg-white text-black rounded">🔍</button>
        </div>
        <div className="flex items-center space-x-4">
          <a href="#" className="hover:underline">로그인</a>
          <a href="#" className="hover:underline">회원가입</a>
          <img src="https://via.placeholder.com/30x30?text=U" alt="profile" className="w-8 h-8 rounded-full bg-gray-300" />
        </div>
      </header>
    );

    const NavigationBar = () => (
      <nav className="bg-white text-black p-2 border-b sticky top-14 z-40">
        <ul className="flex justify-between text-sm">
          {navItems.map((item, index) => (
            <li key={index} className="hover:text-red-600 flex-1 text-center">
              <a href="#" className="block">{item}</a>
            </li>
          ))}
        </ul>
      </nav>
    );

    const FilterBox = ({ handleSearch, setSelectedTheme, setSelectedGenre, setSelectedRegion, setSelectedStatus }) => (
      <div className="w-2/3 border shadow-sm mt-6">
        <div className="bg-gray-50 p-10">
          <div className="grid grid-cols-4 gap-6">
            <div>
              <h2 className="font-semibold text-xl mb-4 pl-8">테마별</h2>
              <ul className="space-y-3 text-base pl-8">
                {["전체", "내한공연", "홍대/소극장", "아이돌", "효 콘서트", "페스티벌/콜라보", "키즈/패밀리"].map(option => (
                  <li key={option}>
                    <label>
                      <input type="radio" name="theme" value={option} onChange={(e) => setSelectedTheme(e.target.value)} className="mr-1 accent-red-600" />
                      {option}
                    </label>
                  </li>
                ))}
              </ul>
            </div>
            <div>
              <h2 className="font-semibold text-xl mb-4 pl-8">장르별</h2>
              <ul className="space-y-3 text-base pl-8">
                {["전체", "콘서트", "뮤지컬/연극", "팬클럽/팬미팅", "클래식", "전시/행사"].map(option => (
                  <li key={option}>
                    <label>
                      <input type="radio" name="genre" value={option} onChange={(e) => setSelectedGenre(e.target.value)} className="mr-1 accent-red-600" />
                      {option}
                    </label>
                  </li>
                ))}
              </ul>
            </div>
            <div>
              <h2 className="font-semibold text-xl mb-4 pl-8">지역별</h2>
              <ul className="space-y-3 text-base pl-8">
                {["전체", "서울", "경기/인천", "대전/충청/강원", "부산/대구/경상", "광주/전라/제주"].map(option => (
                  <li key={option}>
                    <label>
                      <input type="radio" name="region" value={option} onChange={(e) => setSelectedRegion(e.target.value)} className="mr-1 accent-red-600" />
                      {option}
                    </label>
                  </li>
                ))}
              </ul>
            </div>
            <div>
              <h2 className="font-semibold text-xl mb-4 pl-8">판매상태</h2>
              <ul className="space-y-2 text-base pl-8">
                {["전체", "판매중", "판매예정"].map(option => (
                  <li key={option}>
                    <label>
                      <input type="radio" name="status" value={option} onChange={(e) => setSelectedStatus(e.target.value)} className="mr-1 accent-red-600" />
                      {option}
                    </label>
                  </li>
                ))}
              </ul>
            </div>
          </div>
        </div>
        <div className="border-t border-gray-300 bg-white p-4 flex justify-end">
          <button onClick={handleSearch} className="bg-gray-400 text-white py-3 px-16 text-lg mr-6 hover:bg-gray-500">
            조회
          </button>
        </div>
      </div>
    );

    const App = () => {
      const [viewType, setViewType] = React.useState('card');
      const [sortType, setSortType] = React.useState('인기순');
      const [filteredItems, setFilteredItems] = React.useState([]);
      const [selectedTheme, setSelectedTheme] = React.useState('전체');
      const [selectedGenre, setSelectedGenre] = React.useState('전체');
      const [selectedRegion, setSelectedRegion] = React.useState('전체');
      const [selectedStatus, setSelectedStatus] = React.useState('전체');
const getRandomEndDate = (startDate) => {
  const randomDays = Math.floor(Math.random() * 2) + 1; // 1~2일 추가
  const endDate = new Date(startDate);
  endDate.setDate(endDate.getDate() + randomDays);
  return endDate;
};
const getRandomVenue = (region) => {
  const venues = regionVenues[region];
  return venues[Math.floor(Math.random() * venues.length)];
};
const rawItems = [
  { id: 1, title: "작품 1", theme: "내한공연", genre: "콘서트", region: "서울", status: "판매중", popularity: 85, date: new Date(2025, 6, 4), createdAt: new Date(2025, 4, 1) },
  { id: 2, title: "작품 2", theme: "내한공연", genre: "뮤지컬/연극", region: "경기/인천", status: "판매예정", popularity: 72, date: new Date(2025, 7, 21), createdAt: new Date(2025, 4, 5) },
  { id: 3, title: "작품 3", theme: "홍대/소극장", genre: "팬클럽/팬미팅", region: "부산/대구/경상", status: "판매중", popularity: 60, date: new Date(2025, 5, 15), createdAt: new Date(2025, 4, 10) },
  { id: 4, title: "작품 4", theme: "홍대/소극장", genre: "클래식", region: "광주/전라/제주", status: "판매예정", popularity: 95, date: new Date(2025, 8, 12), createdAt: new Date(2025, 4, 12) },
  { id: 5, title: "작품 5", theme: "아이돌", genre: "전시/행사", region: "서울", status: "판매중", popularity: 78, date: new Date(2025, 9, 1), createdAt: new Date(2025, 4, 15) },
  { id: 6, title: "작품 6", theme: "아이돌", genre: "클래식", region: "경기/인천", status: "판매예정", popularity: 88, date: new Date(2025, 7, 30), createdAt: new Date(2025, 4, 18) },
  { id: 7, title: "작품 7", theme: "효 콘서트", genre: "전시/행사", region: "부산/대구/경상", status: "판매중", popularity: 67, date: new Date(2025, 6, 20), createdAt: new Date(2025, 4, 20) },
  { id: 8, title: "작품 8", theme: "효 콘서트", genre: "뮤지컬/연극", region: "광주/전라/제주", status: "판매예정", popularity: 74, date: new Date(2025, 9, 18), createdAt: new Date(2025, 4, 22) },
  { id: 9, title: "작품 9", theme: "페스티벌/콜라보", genre: "팬클럽/팬미팅", region: "서울", status: "판매중", popularity: 81, date: new Date(2025, 10, 5), createdAt: new Date(2025, 4, 25) },
  { id: 10, title: "작품 10", theme: "페스티벌/콜라보", genre: "클래식", region: "경기/인천", status: "판매예정", popularity: 53, date: new Date(2025, 11, 10), createdAt: new Date(2025, 4, 28) },
  { id: 11, title: "작품 11", theme: "키즈/패밀리", genre: "전시/행사", region: "부산/대구/경상", status: "판매중", popularity: 92, date: new Date(2025, 5, 25), createdAt: new Date(2025, 5, 1) },
  { id: 12, title: "작품 12", theme: "키즈/패밀리", genre: "뮤지컬/연극", region: "광주/전라/제주", status: "판매예정", popularity: 79, date: new Date(2025, 6, 10), createdAt: new Date(2025, 5, 5) },
  { id: 13, title: "작품 13", theme: "내한공연", genre: "전시/행사", region: "서울", status: "판매중", popularity: 84, date: new Date(2025, 7, 15), createdAt: new Date(2025, 5, 8) },
  { id: 14, title: "작품 14", theme: "홍대/소극장", genre: "클래식", region: "경기/인천", status: "판매예정", popularity: 65, date: new Date(2025, 8, 20), createdAt: new Date(2025, 5, 12) },
  { id: 15, title: "작품 15", theme: "아이돌", genre: "뮤지컬/연극", region: "부산/대구/경상", status: "판매중", popularity: 71, date: new Date(2025, 9, 25), createdAt: new Date(2025, 5, 15) },
  { id: 16, title: "작품 16", theme: "효 콘서트", genre: "팬클럽/팬미팅", region: "광주/전라/제주", status: "판매예정", popularity: 90, date: new Date(2025, 10, 30), createdAt: new Date(2025, 5, 18) },
  { id: 17, title: "작품 17", theme: "페스티벌/콜라보", genre: "전시/행사", region: "서울", status: "판매중", popularity: 66, date: new Date(2025, 11, 5), createdAt: new Date(2025, 5, 20) },
  { id: 18, title: "작품 18", theme: "키즈/패밀리", genre: "클래식", region: "경기/인천", status: "판매예정", popularity: 83, date: new Date(2025, 6, 15), createdAt: new Date(2025, 5, 22) },
  { id: 19, title: "작품 19", theme: "내한공연", genre: "팬클럽/팬미팅", region: "부산/대구/경상", status: "판매중", popularity: 75, date: new Date(2025, 7, 20), createdAt: new Date(2025, 5, 25) },
  { id: 20, title: "작품 20", theme: "홍대/소극장", genre: "뮤지컬/연극", region: "광주/전라/제주", status: "판매예정", popularity: 69, date: new Date(2025, 8, 25), createdAt: new Date(2025, 5, 28) },
  { id: 21, title: "작품 21", theme: "내한공연", genre: "전시/행사", region: "서울", status: "판매중", popularity: 82, date: new Date(2025, 6, 4), createdAt: new Date(2025, 4, 30) },
  { id: 22, title: "작품 22", theme: "홍대/소극장", genre: "클래식", region: "경기/인천", status: "판매예정", popularity: 77, date: new Date(2025, 7, 12), createdAt: new Date(2025, 5, 2) },
  { id: 23, title: "작품 23", theme: "아이돌", genre: "팬클럽/팬미팅", region: "대전/충청/강원", status: "판매중", popularity: 74, date: new Date(2025, 8, 5), createdAt: new Date(2025, 5, 4) },
  { id: 24, title: "작품 24", theme: "효 콘서트", genre: "전시/행사", region: "부산/대구/경상", status: "판매예정", popularity: 69, date: new Date(2025, 9, 14), createdAt: new Date(2025, 5, 6) },
  { id: 25, title: "작품 25", theme: "페스티벌/콜라보", genre: "뮤지컬/연극", region: "광주/전라/제주", status: "판매중", popularity: 91, date: new Date(2025, 10, 2), createdAt: new Date(2025, 5, 8) },
  { id: 26, title: "작품 26", theme: "키즈/패밀리", genre: "클래식", region: "서울", status: "판매예정", popularity: 87, date: new Date(2025, 11, 18), createdAt: new Date(2025, 5, 10) },
  { id: 27, title: "작품 27", theme: "내한공연", genre: "뮤지컬/연극", region: "경기/인천", status: "판매중", popularity: 80, date: new Date(2025, 12, 9), createdAt: new Date(2025, 5, 12) },
  { id: 28, title: "작품 28", theme: "홍대/소극장", genre: "전시/행사", region: "대전/충청/강원", status: "판매예정", popularity: 85, date: new Date(2026, 1, 6), createdAt: new Date(2025, 5, 14) },
  { id: 29, title: "작품 29", theme: "아이돌", genre: "클래식", region: "부산/대구/경상", status: "판매중", popularity: 89, date: new Date(2026, 2, 24), createdAt: new Date(2025, 5, 16) },
  { id: 30, title: "작품 30", theme: "효 콘서트", genre: "팬클럽/팬미팅", region: "광주/전라/제주", status: "판매예정", popularity: 86, date: new Date(2026, 3, 15), createdAt: new Date(2025, 5, 18) }
].map(item => ({ ...item, endDate: getRandomEndDate(item.date) }));


      const regionVenues = {
  '서울': ['세종문화회관 체임버홀', '고척스카이돔', '올림픽공원 KSPO DOME', '잠실실내체육관'],
  '경기/인천': ['경기아트센터 대극장', '인천아트센터', '수원SK아트리움'],
  '대전/충청/강원': ['대전예술의전당 아트홀', '청주예술의전당', '춘천문화예술회관'],
  '부산/대구/경상': ['부산문화회관 대극장', '대구오페라하우스', '울산문화예술회관'],
  '광주/전라/제주': ['광주문화예술회관 대극장', '전주한국소리문화의전당', '제주아트센터']
};

const items = rawItems.map(item => ({
  ...item,
  venue: getRandomVenue(item.region),
  endDate: getRandomEndDate(item.date)
}));


      const handleSearch = () => {
  let result = items.filter(item =>
    (selectedTheme === '전체' || item.theme === selectedTheme) &&
    (selectedGenre === '전체' || item.genre === selectedGenre) &&
    (selectedRegion === '전체' || item.region === selectedRegion) &&
    (selectedStatus === '전체' || item.status === selectedStatus)
  );

  // 정렬 적용
  if (sortType === '인기순') {
    result.sort((a, b) => b.popularity - a.popularity);
  } else if (sortType === '공연임박순') {
    result.sort((a, b) => a.date - b.date);
  } else if (sortType === '최신순') {
    result.sort((a, b) => b.createdAt - a.createdAt);
  }

  setFilteredItems(result);
};

const handleSortChange = (newSort) => {
  setSortType(newSort);

  let sortedItems = [...filteredItems];
  if (newSort === '인기순') {
    sortedItems.sort((a, b) => b.popularity - a.popularity);
  } else if (newSort === '공연임박순') {
    sortedItems.sort((a, b) => a.date - b.date);
  } else if (newSort === '최신순') {
    sortedItems.sort((a, b) => b.createdAt - a.createdAt);
  }

  setFilteredItems(sortedItems);
};


      React.useEffect(() => {
        handleSearch();
      }, []);


      return (
        <div className="w-full">
          <Header />
          <NavigationBar />
          <div className="flex justify-center">
            <FilterBox
              handleSearch={handleSearch}
              setSelectedTheme={setSelectedTheme}
              setSelectedGenre={setSelectedGenre}
              setSelectedRegion={setSelectedRegion}
              setSelectedStatus={setSelectedStatus}
            />
          </div>
          <div className="flex justify-center">
            <div className="w-2/3 mt-4 flex justify-between items-center">
              <div className="flex space-x-4 items-center">
                <button onClick={() => setViewType('card')} className="p-2 border rounded hover:bg-gray-200">📇</button>
                <button onClick={() => setViewType('list')} className="p-2 border rounded hover:bg-gray-200">📃</button>
              </div>
              <div className="flex space-x-4 text-normal">
  {['인기순', '공연임박순', '최신순'].map(type => (
    <button
      key={type}
      onClick={() => handleSortChange(type)}
      className={`hover:text-red-600 ${sortType === type ? 'text-red-600 font-bold' : 'text-black'}`}
    >
      {type}
    </button>
  )).reduce((prev, curr) => [prev, <span key={curr.key + '-sep'}>|</span>, curr])}
</div>

            </div>
          </div>
          <div className="flex justify-center mt-4">
            <div className="w-2/3">
              {filteredItems.length === 0 ? (
  <div className="text-center text-gray-500 py-10">조건에 맞는 작품이 없습니다.</div>
) : viewType === 'card' ? (
                  <div className="grid grid-cols-4 gap-6">
  {filteredItems.map(item => (
    <div key={item.id} className="border">
      <img src={`https://via.placeholder.com/200x250?text=${item.title}`} alt={item.title} className="w-full h-48 object-cover" />
      <div className="p-4">
        <div className="font-bold text-base truncate">{item.title}</div>
        <div className="text-sm text-gray-500 mt-1">
  {item.date.toLocaleDateString()} – {item.endDate.toLocaleDateString()}
</div>

        <div className="text-sm text-gray-500">{item.venue}</div>
        <div className={`inline-block text-xs mt-1 px-2 py-1 border rounded ${
  item.status === '판매중' ? 'border-green-600 text-green-600' : 'border-gray-600 text-gray-600'
}`}>
  {item.status}
</div>

      </div>
    </div>
  ))}
</div>


              ) : (
  <div>
    {/* 표 헤더 */}
    <div className="grid grid-cols-3 text-center font-semibold py-2 border-t border-b">
      <div>공연명</div>
      <div>공연일시</div>
      <div>공연장소</div>
    </div>

    {/* 공연 아이템들 */}
    {filteredItems.map(item => (
      <div key={item.id} className="grid grid-cols-3 items-center text-center py-8 border-b">
        <div className="flex items-center space-x-4 pl-4">
          <img src={`https://via.placeholder.com/80x100?text=${item.title}`} alt={item.title} className="w-20 h-24 object-cover" />
          <div className="text-left">
  <div className={`inline-block text-xs mb-1 px-2 py-1 border rounded ${
    item.status === '판매중' ? 'border-green-600 text-green-600' : 'border-gray-600 text-gray-600'
  }`}>
    {item.status}
  </div>
  <div className="font-semibold">{item.title}</div>
</div>

        </div>
        <div>{item.date.toLocaleDateString()} ~ {item.endDate.toLocaleDateString()}</div>
        <div>{item.venue}</div>
      </div>
    ))}
  </div>
)
}
            </div>
          </div>
        </div>
      );
    };

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
